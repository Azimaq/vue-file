{"version":3,"sources":["webpack:///./src/css/index.css","webpack:///./src/js/index.js","webpack:///./src/js/libjquery_weui.js"],"names":["Vue","el","data","imgs","name","pic","title","smPic","btn","show","template","components","sm_pic","sm_btn","watch","handler","val","checkTable","deep","methods","alert","fun","$","text","onOK","clearTable","i","length","pushImg","e","self","file","target","reader","FileReader","readAsDataURL","files","onload","result","image","Image","src","width","height","img64","compress","img","canvas","ctx","document","createElement","getContext","drawImage","toDataURL","send","showLoading","ajax","url","type","dataType","success","hideLoading","errno","msg","error","FastClick","require","attach","body"],"mappings":"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","file":"./js/index.js","sourcesContent":["// removed by extract-text-webpack-plugin","import '../css/index.css';\r\nimport './libjquery_weui';\r\nimport Vue from 'vue';\r\nimport sm_pic from '../vue/pic.vue';\r\nimport sm_btn from '../vue/btn.vue';\r\n\r\nnew Vue({\r\n    el: '.page__pd',\r\n    data: {\r\n        imgs: [\r\n            //pic 展示的照片url    smPic压缩后的url   （base64）\r\n            {name: 'img1', pic: '', title: '第一张照',smPic:''},\r\n            {name: 'img2', pic: '', title: '第二张照',smPic:''},\r\n            {name: 'img3', pic: '', title: '第三张照',smPic:''}\r\n        ],\r\n        btn: {\r\n            show: 'weui-btn_disabled'\r\n        }\r\n    },\r\n    template:'<div class=\"page__pd\">' +\r\n    '<div class=\"place\"></div>' +\r\n    '<div class=\"weui-cells weui-cells_form\">' +\r\n    '<div class=\"weui-cell\">' +\r\n    '<sm_pic :imgs=\"imgs\" @pushImg=\"pushImg\"></sm_pic>' +\r\n    '</div></div>' +\r\n    '<sm_btn :btn=\"btn\" @send=\"send\"></sm_btn>' +\r\n    '</div>',\r\n    components:{\r\n        sm_pic,\r\n        sm_btn\r\n    },\r\n    watch: {\r\n        imgs: {\r\n            handler: function (val) {\r\n                this.checkTable();\r\n            },\r\n            deep: true\r\n        }\r\n    },\r\n    methods: {\r\n        checkTable(){\r\n            if (this.imgs[0].pic && this.imgs[1].pic && this.imgs[2].pic) {\r\n                if (this.btn.show !== '')\r\n                    this.btn.show = '';\r\n            } else {\r\n                this.btn.show = 'weui-btn_disabled';\r\n            }\r\n        },\r\n        alert(title, fun){\r\n            fun = fun || '';\r\n            $.alert({\r\n                title: '',\r\n                text: title,\r\n                onOK: fun\r\n            });\r\n        },\r\n        clearTable(){\r\n            for (let i = 0; i < this.imgs.length; i++) {\r\n                this.imgs[i].pic = '';\r\n            }\r\n        },\r\n        //显示照片的精髓\r\n        pushImg(e, i){\r\n            let self = this;\r\n            let imgs = this.imgs,\r\n                file = e.target,\r\n                reader = new FileReader();\r\n            reader.readAsDataURL(file.files[0]);\r\n            reader.onload = function () {\r\n                imgs[i].pic = this.result;   // 把得到的img base64给界面显示\r\n                //往下是压碎图片质量为0.5  smPic为压缩以后的base64\r\n                let image = new Image();\r\n                image.src = imgs[i].pic;\r\n                image.onload = function(){\r\n                    let width = image.width,\r\n                        height = image.height;\r\n                    var img64 = self.compress(image,width,height);\r\n                    imgs[i].smPic = img64;\r\n                }\r\n            }\r\n        },\r\n        compress(img,width,height){\r\n            let canvas, ctx, img64;\r\n            canvas = document.createElement('canvas');\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            ctx = canvas.getContext(\"2d\");\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            img64 = canvas.toDataURL(\"image/jpeg\", 0.5);\r\n            return img64; // 压缩后的base64串\r\n        },\r\n        send(){\r\n            $.showLoading();\r\n            let self = this;\r\n            $.ajax({\r\n                url: '../php/indexs.php',\r\n                type: 'POST',\r\n                dataType: 'json',\r\n                data: {\r\n                    \"pic1\": this.imgs[0].smPic,\r\n                    \"pic2\": this.imgs[1].smPic,\r\n                    \"pic3\": this.imgs[2].smPic\r\n                },\r\n                success: function (data) {\r\n                    $.hideLoading();\r\n                    if (data.errno == 0) {\r\n                        let msg = '上传成功';\r\n                        self.alert(msg, this.clearTable)\r\n                    } else if (data.errno == 1) {\r\n                        self.alert(data.error)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n});\r\n","import 'jquery-weui/dist/lib/zepto'\r\nimport 'jquery-weui/dist/lib/jquery-2.1.4'\r\nimport 'jquery-weui/dist/js/jquery-weui';\r\nimport 'jquery-weui/dist/lib/weui.css';\r\nimport 'jquery-weui/dist/css/jquery-weui.css';\r\n// import 'jquery-weui/dist/js/city-picker';\r\n\r\n// 移动端 点击延迟\r\n// const FastClick = require('fastclick');\r\nconst FastClick = require('jquery-weui/dist/lib/fastclick');\r\nFastClick.attach(document.body);\r\n"],"sourceRoot":""}